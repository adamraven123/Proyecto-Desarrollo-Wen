{% extends "base.html" %} {% load bootstrap4 %} {% load static %} 
{% block css %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
{% endblock css%}

{% block content %}
<div class = "container">
	<div class="row">
		<div class="col-lg-10 col-offset-4">
			<div class="card">
				<h5 class="card-header">{{titulo}}</h5>
				<div class="card-body">
					<h5 class="card-title">Special title treatment</h5>
					<p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
						<form action="" method="POST" enctype="multipart/form-data"> {% csrf_token %}
						<div class="form-group row">
						<label class="col-md-3 col-form-label" for="id_material">Material</label>
						<div class="col-md-9">
							<select name="material" class="form-control" id="id_material" title="" required="">
							{% for material in materiales %}
							<option value="{{material.pk}}">{{material.nombre}}</option>
							{% endfor %}
							</select>
						</div>
					</div>
					<div class="form-group row">
						<label class="col-md-3 col-form-label" for="id_cantidad">Cantidad:</label>
						<div class="col-md-9">
	  						<input type="number" class="form-control" name="cantidad" id="id_cantidad" required="">
	  					</div>
					</div>
					<a type="submit" value="Enviar" class="btn btn-primary">
			</form>
				<a href="#" class="btn btn-primary">Go somewhere</a>
				</div>
			</div>
			
		</div>
	</div>	
</div>
{% endblock content %}

{% block javascript %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
<script>
	$(document).ready(function () {
		$(".select2").select2();
		$("#tc_list").addClass("active");
		
		$('.datepicker').datepicker({ format: 'dd/mm/yyyy' });
		
	});
</script>
<script>
	  $(document).ready(function(){
        $("#enviar").click(function(){
            var material = $('#id_material').val();
            var cantidad = $('#id_cantidad').val();
            var data = {
                csrfmiddlewaretoken: "{{csrf_token}}",
                material: material,
                cantidad: cantidad,
            }

            $.ajax({
                type: "POST",
                url: "{% url 'add_stock' %}",
                data: data,
                success: function(response){
                    swal("Exito!","Todo bien por aca.","success");
                    $("#enviar").html(response.mensaje);
                },
                error: function(){
                    swal("Error!","Salio todo mal.","warning");
                },

            });
            console.log(data);
        });
    });
</script>
{% endblock javascript %}